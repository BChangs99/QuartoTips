<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Chang">
<meta name="dcterms.date" content="2025-01-13">

<title>Tips to make your life easier with Quarto! ‚Äì Lab2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-43df0d6f53b733b42d37fa7808e17715.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-3b4f979bdca410b7d451b217f8053599.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Lab2</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Tips to make your life easier with Quarto!</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Blog</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Brian Chang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 13, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<h1>
Make your life easier with the VSCode Quarto extension üòåüöÄü§ì
</h1>
<h2 class="anchored">
Introduction
</h2>
<p><a href="https://quarto.org/">Quarto</a> is a convenient data science tool for Non-Web Developers to convert their Python or R notebooks into reproducible, production quality content for a variety of mediums. While it offers robust features, for those unfamiliar (like me), it can feel counterproductive to be using Quarto when you‚Äôre just trying to focus on the creation of content.</p>
<p>During my Masters at UBC, I used Quarto to create a report for a group project (<a href="https://ubc-mds.github.io/DSCI522-2425-25-heart_disease_predictor">üëâ Shameless self plug üëà</a>). While Quarto felt powerful, the learning curve, issues with remembering commands, and collaborating on reports felt daunting. To overcome this, I explored ways to simplify and optimize my Quarto workflow.</p>
<p>In this tutorial, I‚Äôll share the three practical tips that helped me maintain productivity without getting bogged down on the annoying side of Quarto. Let‚Äôs start with the most basic tip: setting up a Quarto project quickly in VSCode.</p>
<h2 class="anchored">
Skip The Command Line! üßë‚Äçüíª
</h2>
<p>A CLI (Command Line Interface) is great when you‚Äôre familiar with the commands! But if you‚Äôre just starting out, I find it more intuitive and efficient to work with visual navigation as working through a complex command-line setup can be a barrier to your efficiency. This really shines when you don‚Äôt remember the exact commands you need to run things.</p>
<p>The first thing we need to do is install the Quarto extension. First navigate to the extensions tab in VSCode (<a href="#fig-extension" class="quarto-xref">Figure&nbsp;1</a>). You can also press <code>CMD + Shift + X</code> on Mac or <code>CTRL + Shift + X</code> on Windows.</p>
<div id="fig-extension" class="quarto-float quarto-figure quarto-figure-center anchored" style="display: block; margin: auto;" width="300">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-extension-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/Extensions.png" id="fig-extension" class="img-fluid figure-img" style="display: block; margin: auto;" width="300">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-extension-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
<p>Then in the text box search for Quarto and click on the Install button (where my uninstall button is) to get Quarto installed on your VSCode (<a href="#fig-install" class="quarto-xref">Figure&nbsp;2</a>).</p>
<div id="fig-install" class="quarto-float quarto-figure quarto-figure-center anchored" style="display: block; margin: auto;">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-install-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/Install.png" id="fig-install" class="img-fluid figure-img" style="display: block; margin: auto;">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-install-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
<p>Now for the crux of the matter, let‚Äôs create a project using VSCode! We now want to open up the <a href="https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette">Command Palette</a>. This is basically where VSCode lets you access all the command configurations of the IDE. It lets you find all the keyboard shortcuts of VSCode and even make new ones for yourself! This is also where we‚Äôll be exploring our first command: Quarto Create Project.</p>
<p>To open up the command palette (<a href="#fig-cmd-pal" class="quarto-xref">Figure&nbsp;3</a>), we can either click on the gear icon on the bottom left and click on it directly, or we can press <code>CMD + Shift + P</code> if you‚Äôre on Mac or <code>CTRL + Shift + P</code> on Windows. From here we‚Äôll begin typing ‚ÄúQuarto Create Project‚Äù and click on the first dropdown. Now you can specify what type of project by selecting them and a window will pop open for you to select where you want this directory.</p>
<div id="fig-cmd-pal" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cmd-pal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/create_project.gif" id="fig-cmd-pal" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-cmd-pal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3
</figcaption>
</figure>
</div>
<p>Using the Quarto extension, we were able to skip having to remember the commands for creating all the types of projects Quarto offers. With the project all set up, the next step in increasing our productivity is making the rendering process easier.</p>
<h1>
Automate your workflow ü§ñ
</h1>
<p>Similar to why we would want to have a visual aid for creating a project, having a quick and convenient button or keyboard shortcut for rendering our project is equally as important for productivity. When you‚Äôre modifying the content of your report a lot, you constantly need to update your report to preview the latest changes and making sure everything is up-to-date. Although Quarto offers the preview command for this functionality, I‚Äôve found from personal experience this method inconsistent in displaying my changes. As well, Quarto themselves recommend always rendering the website before deploying it, <a href="https://quarto.org/docs/websites/">as stated in their documentation</a>.</p>
<p>Reading on Quarto‚Äôs VSCode extensions for the <a href="https://quarto.org/docs/tools/vscode.html#render-and-preview">Preview command</a>, I found that the extension will perform both Render and Preview for us when we trigger the preview, ensuring the content of our report is always up to date. Note, this is not to be confused with the preview command mentioned above, which is the CLI version.</p>
<p>To execute the extension‚Äôs preview command, we can render and preview our Quarto document by clicking the ‚ÄúPreview‚Äù button inside the triple dot dropdown in the top right corner of VSCode <a href="#fig-rndr-btn" class="quarto-xref">Figure&nbsp;4</a> or using the keyboard shortcut <code>CMD/CTRL + Shift + K</code>. As well, we can also change the format in which the document is rendered and previewed by clicking on ‚ÄúPreview Format‚Ä¶‚Äù</p>
<div id="fig-rndr-btn" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rndr-btn-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/render_button.png" id="fig-rndr-btn" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rndr-btn-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4
</figcaption>
</figure>
</div>
<p>When I was reading through the Quarto documentation <a href="https://quarto.org/docs/tools/vscode.html">section on VSCode</a>, I found a convenient configuration ‚Äòrender-on-save‚Äô. This allows our entire project to re-render every time we save the document we‚Äôre working in. This allows us to stop having to trigger the re-rendering and previews manually, and instead batch the document saving and rendering together. This is essential to ensuring we are re-rendering as often as possible to make sure our content is always up to date. As well, within the same documentation I found another configuration that allows our preview windows to always open in another window. This is especially useful for developers who use multiple screens.</p>
<p>To enable these configurations, we need to access our <a href="https://code.visualstudio.com/docs/getstarted/settings#:~:text=To%20open%20the%20Settings%20editor,settings%20you%20are%20looking%20for.">VSCode Settings Editor</a>. This is where we can access all the configurations and settings of the IDE, not to be confused with the Command Palette which is for commands specifically.</p>
<p>As we can see in <a href="#fig-sve-rndr" class="quarto-xref">Figure&nbsp;5</a>, we can again use the gear icon from <a href="#fig-cmd-pal" class="quarto-xref">Figure&nbsp;3</a> and click on Settings, or we can press <code>CMD/CTRL + ,</code>. Now type Quarto to find all the quarto related settings. In here we want to make sure ‚ÄúQuarto &gt; Quarto Render: Render On Save‚Äù is checked and ‚ÄúQuarto &gt; Render: Preview Panel‚Äù is ticked to what we want.</p>
<div id="fig-sve-rndr" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sve-rndr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/save_on_render.gif" id="fig-sve-rndr" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-sve-rndr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5
</figcaption>
</figure>
</div>
<p>Great! We‚Äôve now streamlined our workflow significantly through automations and shortcuts, removing the need for manually re-rendering, saving time, and minimizing areas for potential errors. Now the last tip I‚Äôll leave you with is streamlining collaboration with others by including child documents. This personally saved me huge headaches with merge conflicts and allowed our group to work concurrently on the same report in an efficient fashion.</p>
<h2 class="anchored">
Streamline Collaboration with Child Documents ü§ù
</h2>
<p>Collaborating on group projects can be challenging, especially when multiple contributors are editing the same document, causing a big headache in potential merge conflicts. <a href="https://quarto.org/docs/authoring/includes.html">Quarto‚Äôs child documents feature</a> offers a great solution for tackling exactly this. These child documents allow each group member to work on different sections of one combined report, while still keeping everything consolidated. What‚Äôs essentially happening, is the report has been split into multiple sections living in different files, but when you render the report, it will render each child document and feed it into the full parent document.</p>
<p>For example, one person can be writing in the ‚ÄúIntroduction‚Äù section of the report while another person can be working on the analysis method. Since both people are working in different files, when it‚Äôs time to merge, there won‚Äôt be any merge conflicts. Looking below at <a href="#fig-child-docs" class="quarto-xref">Figure&nbsp;6</a> is the format in which I created my parent document to include all my child documents. For posterity, to include child documents you will want to follow the following syntax:</p>
<p><code>{{&lt; include _content.qmd &gt;}}</code></p>
<p>Note the ‚Äú_‚Äù syntax prepending the file name, this is important to specify so that Quarto won‚Äôt render those child documents by themselves. Instead, it only renders the child document into the full parent document. As well, in my example (<a href="#fig-child-docs" class="quarto-xref">Figure&nbsp;6</a>), I specify ‚Äúcontent/‚Ä¶‚Äù. Although it isn‚Äôt necessary to have them in a content folder, I recommend doing so to maintain modularity.</p>
<div id="fig-child-docs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-child-docs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../assets/child_documents.png" id="fig-child-docs" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-child-docs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6
</figcaption>
</figure>
</div>
<p>There we go! Now you and your team members can rest easy working on your own sections without interfering with each other. I‚Äôll add as an additional note that although collaboration was the use case for me in using child documents, they can be used for more than just that! For example, if you had a blog with lots of postings but with the same introduction, you could reuse these child documents simply by including the same introduction in all your blog posts!</p>
<h2 class="anchored">
Wrapping Up and Next Steps üåüüìò
</h2>
<p>Quarto is a pretty powerful tool for creating polished reproducible reports, and with the right configurations and shortcuts, it can feel blazingly fast! In this post, we covered the three key tips I found helpful to streamline your workflow and allow you to focus on the core content:</p>
<p><strong>Skip the Command Line</strong>: Set up projects easily in VSCode using the Quarto extension</p>
<p><strong>Automate Your Workflow</strong>: Save time with render-on-save and the render + preview feature</p>
<p><strong>Streamline Collaboration</strong>: Use child documents to organize work and reduce merge conflicts in group projects</p>
<h3 class="anchored">
Where do we Go From Here? üõ§Ô∏è‚ú®
</h3>
<p>For web developers, If you‚Äôre looking for more visual customization, I‚Äôd recommend looking into the custom CSS (Cascading Style Sheets) and the Sass variables section <a href="https://quarto.org/docs/output-formats/html-themes.html">here</a>.</p>
<p>For those looking for additional capabilities of the VSCode extension, Quarto has a list of all the features <a href="https://quarto.org/docs/tools/vscode.html#render-and-preview">here</a>!</p>
<h3 class="anchored">
Final Thoughts
</h3>
<p>Thank you for taking the time to read my post! I genuinely hope these tips prove as helpful to you as they have been for me!</p>
<p>This has been my first time writing a blog post, and it‚Äôs been a fun learning journey putting it together. If you have any feedback or suggestions, I‚Äôd love to hear from you! If you‚Äôd like to reach out or learn more about my work, you can find all the ways to contact me on my <a href="https://bchangs99.github.io/">portfolio</a>.</p>
<p>Signing Off,</p>
<p>Brian Chang üëã</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>